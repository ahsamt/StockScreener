{% extends "stockscreener/layout.html" %} {% load static %}{% block body %}
<h2 class="mb-3">{{ user }}'s watchlist</h2>
<!-- prettier-ignore -->
{% if user.is_authenticated %} {% if watched_stocks %}

<h6 class="mb-3">Your watched stocks:</h6>
{% for item in watched_stocks %}
<div class="watched_item">
  <div class="row">
    <div class="col">
      <div class="card mb-4">
        <div class="card-body">
          <!-- prettier-ignore -->
          {% include "stockscreener/stock_details.html" with stock=item.stock change=item.change closing_price=item.closing_price %}
          <br />
          <div class="card-link"></div>
        </div>
      </div>
      <h5>Your notes for {{ item.stock }}:</h5>
      <form
        class="edit_notes"
        id="editNotes{{ item.stockID }}"
        data-stock_id="{{ item.stockID }}"
      >
        <div class="form-group">
          <textarea
            class="edit_content form-control"
            id="editContent{{ item.stockID }}"
            rows="12"
          >
{{ item.notes }}
          </textarea>
          <button
            class="edit_notes_button"
            type="submit"
            data-stock_id="{{ item.stockID }}"
          >
            Save notes
          </button>
        </div>
      </form>
      <button class="remove_from_watchlist" data-stock_id="{{ item.stockID }}">
        Remove {{ item.stock }} from watchlist
      </button>
      <p class="message" id="message_notes"></p>
    </div>

    <div class="col">
      <!-- prettier-ignore -->
      {% include "stockscreener/graphs.html" with graph1=item.graph1 graph2=item.graph2 %}
    </div>
  </div>
  <hr />
</div>
{% endfor %} {% else %}
<p>You do not have any stocks in your watchlist</p>
{% endif %} {% endif %}
<br />

<br />
{% endblock %}
